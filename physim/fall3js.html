<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <script src="https://unpkg.com/three@0.137.4/build/three.min.js"></script>
</head>
<body>
    <input type="button" id="start" value="Start!!" onclick="init()" />
    <input type="button" id="stop" value="Stop!!" onclick="stop()" />
    <canvas id="myCanvas"></canvas>

    <script>
     // window.addEventListener("DOMContentLoaded", init);
     var animationReqId;

     function init() {
         const width = 960;
         const height = 540;

         // レンダラーを作成
         // レンダラーを作成
         const renderer = new THREE.WebGLRenderer({
             canvas: document.querySelector("#myCanvas")
         });
         renderer.setPixelRatio(window.devicePixelRatio);
         renderer.setSize(width, height);

         // シーンを作成
         const scene = new THREE.Scene();

         // カメラを作成
         const camera = new THREE.PerspectiveCamera(
             45,
             width / height,
             1,
             10000
         );
         camera.position.set(0, 0, +1000);

         // 箱を作成
         const geometry = new THREE.SphereGeometry(30, 5, 5);
         const material = new THREE.MeshStandardMaterial({
             color: 0x00ffff
         });
         const ball = new THREE.Mesh(geometry, material);
         scene.add(ball);

         // 平行光源
         const directionalLight = new THREE.DirectionalLight(
             0xffffff
         );
         directionalLight.position.set(1, 1, 1);
         // シーンに追加
         scene.add(directionalLight);

         // 初回実行
         renderer.render(scene, camera);

         const dt = 0.1;
         var ay = -9.8;
         var x = -200;
         var y = 0;
         var vx = 50;
         var vy = 50;
         var t = 0;

         // 初回実行
         tick();

         function tick() {
             animationReqId = requestAnimationFrame(tick);

             t = t + dt;

             vx = vx;
             vy = vy + ay * dt;
             x = x + vx * dt;
             y = y + vy * dt;
             ball.position.set(x, y, 0);

             // レンダリング
             renderer.render(scene, camera);
         }

     }

     function stop() {
         cancelAnimationFrame(animationReqId);
     }
    </script>
</body>
</html>
